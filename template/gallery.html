{% include 'head.html' %}
    <div class="container text-center marginX">
        <div class="row">
          <div class="col">
            <div id="imagePreview" style="width: 35%; align-items: center; display: inline-block;"></div>
            <nav style="align-items: center; background-color: rgb(251, 251, 251);">
                <div class="container-fluid">
                    <form id="uploadForm" action="/upload" method="post" enctype="multipart/form-data" class="margin">
                        <input type="file" id="fileInput" name="file" accept="image/*">
                        <input class="btn btn-primary" type="submit" value="upload">
                    </form>
                </div>
            </nav>
          </div>
        </div>
    </div>

    <h3 class="margin" style="text-align: center;">Galeria</h3>
    {% if images %}
        <div class="container text-center">
            <div class="row row-cols-4">
                {% for image in images %}
                    <div class="col margin">
                        <img class="img-fluid" src="https://th.bing.com/th/id/OIP.Kg6AyaeYj2PbrMI2DBb3cQHaE8?rs=1&pid=ImgDetMain" alt="{{ image.nombre }}">
                        <form action="{{ url_for('delete_image', idImagen=image.idImagen) }}" method="post">
                            <div class="btn-group margin" role="group" aria-label="Basic mixed styles example">
                                <button class="btn btn-outline-danger" type="submit">Eliminar</button>
                                <button class="btn btn-outline-primary" type="submit">Analizar</button>
                            </div>
                        </form>
                    </div>
                {% endfor %}
        </div>
    {% else %}
        <p>No hay imagenes para mostrar.</p>
    {% endif %}

   <script>
        document.addEventListener("DOMContentLoaded", function() {
            document.getElementById('fileInput').addEventListener('change', function() {
                var file = this.files[0];
                if (file) {
                    var reader = new FileReader();
                    reader.onload = function(event) {
                        var imagePreview = document.getElementById('imagePreview');
                        imagePreview.innerHTML = '';
                        var img = document.createElement('img');
                        img.src = event.target.result;
                        img.style.maxWidth = '100%'; // Ajusta el tama√±o de la imagen previa
                        imagePreview.appendChild(img);
                    };
                    reader.readAsDataURL(file);
                }
            });
        });
   </script> 
</body>
</html>